<section>
  <div class="page-header">
    <h1 data-ng-bind="vm.submission.title"></h1>
  </div>
  <div>
    <p data-ng-bind="vm.submission.body"></p>
  </div>
  <small>
    <em class="text-muted">
      Posted on
      <span data-ng-bind="vm.submission.created | date:'mediumDate'"></span>
      by
      <span data-ng-if="vm.submission.user"
            data-ng-bind="vm.submission.user.displayName"></span>
      <span data-ng-if="!vm.submission.user">Deleted User</span>
    </em>
  </small>
  <small class="list-group-item-text">
    <br>
    Category:
    <span data-ng-bind="vm.submission.categories"></span>
  </small>
  <p class="lead" data-ng-bind="vm.submission.content"></p>
  <div class="pull-right"
       data-ng-show="vm.submission.isCurrentUserOwner">
    <a class="btn btn-primary"
       data-ui-sref="submissions.edit({ submissionId: vm.submission._id })">
      <i class="glyphicon glyphicon-edit"></i>
    </a>
    <a class="btn btn-primary" data-ng-click="vm.remove()">
      <i class="glyphicon glyphicon-trash"></i>
    </a>
  </div>

  <br><br>

  <tabset>
    <tab>
      <tab-heading>
        <span>Improvements</span>
      </tab-heading>
      <div>
        <br>
        <div class="row">
        <button class="btn btn-primary"
                ui-sref="submissions.createImprovement({ submissionId: vm.submission._id })"
                data-ng-hide="vm.submission.isCurrentUserOwner">Add an Improvement
        </button>

          <div ui-view="subImprovements"></div>
        </div>
      </div>
    </tab>

    <tab>
      <tab-heading>
        <span>Comments</span>
      </tab-heading>
      <div>
        <br>
        <div class="row">
          <button class="btn btn-primary"
                  ui-sref="submissions.createUsercomment({ submissionId: vm.submission._id })"
                  data-ng-hide="vm.submission.isCurrentUserOwner"> Add a comment
          </button>
          <br><br>
          <div ui-view="subUserComments"></div>
        </div>
      </div>
    </tab>

</section>
